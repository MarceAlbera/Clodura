{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","event-listeners/scroll-event-handlers.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","ScrollEventHandlers","prototype","initialize","_this","this","chrome","runtime","onMessage","addListener","message","sender","sendResponse","command","removeListenerFlag","totalLiElements","liList","fullPageScrolled","scrolling","scroll","checkifScrolling","checkPageScrolled","scrollingElement","document","getElementById","addEventListener","handler","index_1","listUpdated_1","allElements","Array","from","getElementsByTagName","children","forEach","element","s1","innerText","concat","toString","includes","s","push","sendMessage","full_page_scrolled","response","console","log","timeout","setInterval","interval","removeEventListener","clearInterval","scrollHeight","clientHeight","scrollTop","delay"],"mappings":"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","file":"scroll-event-handlers.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","\nexport class ScrollEventHandlers {\n\n    delay = 1000;\n    timeout = null;\n    interval = null;\n    scrolling = false;\n    fullPageScrolled = false;\n    removeListenerFlag = false;\n    totalLiElements = 0\n    liList = []\n    constructor(){\n        this.initialize();\n    }\n\n    initialize() {\n        chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n            if(message.command === 'removeScrollListener'){\n                this.removeListenerFlag = true;\n            }else if(message.command === 'addScrollListerner'){\n                this.totalLiElements = 0\n                this.liList = [];\n                this.removeListenerFlag = false;\n                this.fullPageScrolled = false;\n                this.scrolling = false;\n                this.scroll();\n                this.checkifScrolling();\n                this.checkPageScrolled();\n            }\n        })\n    }\n\n    scroll() {\n        const scrollingElement = document.getElementById('search-results-container');\n        if(scrollingElement){\n            scrollingElement.addEventListener('scroll', (e) => {\n                this.scrolling = true;\n            });\n        }\n    }\n\n    handler() {\n        const scrollingElement = document.getElementById('search-results-container');\n        if(scrollingElement){\n            const allElements = Array.from(scrollingElement.getElementsByTagName('ol')[0].children);\n            this.totalLiElements = allElements.length;\n            // console.log('TOTAL', this.totalLiElements)\n            let index = 0;\n            let listUpdated = false;\n            allElements.forEach(element => {\n                // console.log(element.getElementsByTagName('a'))\n                if(element.getElementsByTagName('a').length > 0){\n                    const s1 = element.getElementsByTagName('a')[1].innerText.concat(index.toString());\n                    if(!this.liList.includes(s1)){\n                        const s = element.getElementsByTagName('a')[1].innerText.concat(index.toString())\n                        this.liList.push(s)\n                        listUpdated = true;\n                    }\n                }\n                index++;\n            });\n            if(listUpdated){\n                chrome.runtime.sendMessage({command:'userHasScrolled', full_page_scrolled: this.fullPageScrolled}, (response) => {\n                    console.log('')\n                })\n            }\n            // console.log('this.lilist', this.liList);\n        }\n    }\n\n    checkifScrolling() {\n        this.timeout = setInterval(() => {\n            if (this.scrolling) {\n                this.scrolling = false;\n                this.handler()\n            }\n        }, 1000)\n    }\n\n    checkPageScrolled() {\n        this.interval = setInterval(() => {\n            const scrollingElement = document.getElementById('search-results-container');\n            if(scrollingElement){\n                if(this.removeListenerFlag){\n                    scrollingElement.removeEventListener('scroll', this.handler);\n                    clearInterval(this.interval);\n                    clearInterval(this.timeout);\n                }\n                if((scrollingElement.scrollHeight - scrollingElement.clientHeight) === scrollingElement.scrollTop){\n                    this.fullPageScrolled = true;\n                }\n            }\n        }, 500)\n    }\n};"]}